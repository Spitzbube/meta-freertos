
all: $(STM32CUBEF1_LIB)

$(STM32CUBEF1_LIB): $(STM32F1xx_HAL_OBJS) $(STM32_USB_DEVICE_LIB_CORE_OBJS) $(STM32_USB_DEVICE_LIB_CDC_OBJS)
	$(AR) rcs ../$@ $^

$(STM32F1xx_HAL_OBJS):%.o:$(STM32F1xx_HAL_SRC)%.c
	$(CC) $< $(CFLAGS) -c -o $@

$(STM32_USB_DEVICE_LIB_CORE_OBJS):%.o:$(STM32_USB_DEVICE_LIB)/Core/Src/%.c
	$(CC) $< $(CFLAGS) -c -o $@

$(STM32_USB_DEVICE_LIB_CDC_OBJS):%.o:$(STM32_USB_DEVICE_LIB)/Class/CDC/Src/%.c
	$(CC) $< $(CFLAGS) -c -o $@

